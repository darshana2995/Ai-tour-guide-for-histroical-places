<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Tour Guide - Demo</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="wrap">
    <!-- top navigation (hidden until login) -->
    <nav id="navbar" style="display:none">
      <span id="adminBadge" class="small-pill" style="display:none;margin-right:auto;background:#dcfce7;color:#166534;border:1px solid rgba(22,101,52,0.2)">Admin Mode</span>
      <button id="navHomeBtn" onclick="showPage('homePage')">Home</button>
      <button id="navJourneyBtn" onclick="showPage('journeyPage')">Create Journey</button>
      <button id="navPlannerBtn" onclick="showPage('aiPlannerPage')">AI Planner</button>
      <button id="navHotelsBtn" onclick="showPage('hotelPage')">Hotels</button>
      <button id="navHotelBookingsBtn" onclick="openBookingsPage()">Hotel Bookings</button>
      <button id="navProfileBtn" onclick="showPage('profilePage')">Profile</button>
      <button id="navAchievementsBtn" onclick="showPage('achievementPage')">Achievements</button>
      <button id="navAdminBtn" onclick="showPage('adminPage')" style="display:none">Admin</button>
      <button id="langToggleBtn" onclick="toggleLanguageMenu()">Multi-language</button>
      <select id="langSelect" style="display:none;max-width:150px" onchange="onLanguageChange(this.value)">
        <option value="en">English</option>
        <option value="hi">Hindi</option>
        <option value="mr">Marathi</option>
        <option value="gu">Gujarati</option>
        <option value="ta">Tamil</option>
        <option value="bn">Bengali</option>
        <option value="fr">French</option>
        <option value="es">Spanish</option>
      </select>
      <button id="navLogoutBtn" onclick="logout()">Logout</button>
    </nav>

    <!-- LANDING PAGE -->
    <div id="landingPage" class="page active">
      <div class="card" style="max-width:980px;margin:18px auto">
        <div style="display:grid;grid-template-columns:1.1fr .9fr;gap:18px;align-items:center">
          <div>
            <div class="small-pill">AI Tour Guide</div>
            <h1 style="margin-top:8px">Plan smarter historical trips, faster.</h1>
            <p class="small-muted" style="font-size:15px">
              Build journeys, compare hotels, track budgets, and get instant travel tips - all in one place.
            </p>
            <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap">
              <button class="primary" onclick="showPage('loginPage')">Get Started</button>
              <button class="btn-ghost" onclick="showPage('registerPage')">Create Account</button>
            </div>
          </div>
          <div style="background:linear-gradient(135deg,#0f766e22,#f59e0b22);border-radius:16px;padding:14px">
            <div class="muted-block">
              <strong>Key Features</strong>
              <div class="small-muted" style="margin-top:6px">• AI trip planner with budget guidance</div>
              <div class="small-muted">• Hotel booking with payment status</div>
              <div class="small-muted">• Itinerary + PDF export</div>
              <div class="small-muted">• Trip photos + visits tracker</div>
            </div>
            <div class="gallery" style="margin-top:10px">
              <img src="https://images.unsplash.com/photo-1505765050359-0101643d6e9d" alt="place1">
              <img src="https://images.unsplash.com/photo-1526778548025-fa2f459cd5c1" alt="place2">
              <img src="https://images.unsplash.com/photo-1467269204594-9661b134dd2b" alt="place3">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- LOGIN PAGE -->
    <div id="loginPage" class="page">
      <div class="card" style="max-width:520px;margin:18px auto;text-align:center">
        <h1 id="loginTitle">Welcome back</h1>
        <p id="loginSubtitle" class="small-muted">Login to your AI Tour Guide account</p>
        <input id="loginEmail" type="email" placeholder="Email" />
        <input id="loginPass" type="password" placeholder="Password" />
        <div style="display:flex;gap:10px; margin-top:12px">
          <button id="loginBtn" class="primary" style="flex:1" onclick="login()">Login</button>
          <button id="gotoRegisterBtn" style="flex:1" onclick="showPage('registerPage')">Register</button>
        </div>
        <p class="small-muted" style="margin-top:12px">Demo: demo@example.com / demo123</p>
      </div>
    </div>

    <!-- REGISTER PAGE -->
    <div id="registerPage" class="page">
      <div class="card" style="max-width:520px;margin:18px auto">
        <h2 id="registerTitle">Create account</h2>
        <input id="regName" placeholder="Full name" />
        <div style="display:flex;gap:10px">
          <select id="regCountry" style="width:45%">
            <option value="+91" selected>+91 (India)</option>
            <option value="+1">+1 (USA)</option>
            <option value="+44">+44 (UK)</option>
            <option value="+61">+61 (Australia)</option>
            <option value="+971">+971 (UAE)</option>
          </select>
          <input id="regPhone" type="tel" inputmode="numeric" maxlength="10" placeholder="Phone (10 digits)" style="width:55%" />
        </div>
        <input id="regEmail" type="email" placeholder="Email" />
        <input id="regPass" type="password" placeholder="Password" />
        <div style="display:flex;gap:10px; margin-top:12px">
          <button id="registerBtn" class="primary" style="flex:1" onclick="register()">Register</button>
          <button id="registerBackBtn" style="flex:1" onclick="showPage('loginPage')">Back</button>
        </div>
      </div>
    </div>

    <!-- HOME PAGE -->
    <div id="homePage" class="page">
      <div class="hero card" style="padding:0">
        <img id="slideImg" src="https://images.unsplash.com/photo-1505765050359-0101643d6e9d?auto=format&fit=crop&w=1600&q=80" alt="banner">
        <div class="overlay">
          <h1 style="font-size:34px;letter-spacing:1px">Explore History - with your AI Travel Partner</h1>
          <p style="opacity:.9;margin-top:8px">Smart itineraries • Hotel bookings • Budget & time manager</p>
          <div style="margin-top:12px">
            <button class="primary" onclick="showPage('journeyPage')" style="padding:10px 16px">Create Journey</button>
            <!-- Updated: Talk to AI now opens a full Chatbot Page -->
            <button onclick="showChatPage()" style="margin-left:8px;padding:10px 16px;border-radius:10px">Talk to AI &#129302;</button>
            <!-- Removed 'Suggest for today' button from homepage (user requested removal) -->
          </div>
        </div>
      </div>


      
      <!-- ICONS: square and Hotels replaced with User Dashboard -->
      <div class="icons">
        <div class="icon" onclick="showPage('journeyPage')" title="Plan Trip">
          <div class="emoji">&#x1F5FA;&#xFE0F;</div>
          <div class="title">Plan Trip</div>
          <div class="small-muted">Create & save itinerary</div>
        </div>

        <div class="icon" onclick="showPage('profilePage')" title="Profile">
            <div class="emoji">&#x1F464;</div>
            <div class="title">Profile</div>
             <div class="small-muted">View / Edit</div>
            </div>

        <div class="icon" onclick="document.getElementById('tripPhotoUpload').click()" title="Upload Trip Photos">
             <div class="emoji">&#x1F4F8;</div>
             <div class="title">Trip Photos</div>
             <div class="small-muted">Upload Memories</div>
            </div>

        <div class="icon" onclick="showChatPage()" title="CATBOT">
            <div class="emoji">&#129302;</div>
            <div class="title">CATBOT</div>
            <div class="small-muted">Ask anything</div>
        </div>


        <div class="icon" onclick="toggleDarkMode()" title="Toggle dark mode">
          <div class="emoji">&#x1F319;</div>
          <div class="title">Dark Mode</div>
          <div class="small-muted">Toggle theme</div>
        </div>
      </div>

      <!-- REPLACED: Budget & Dashboard removed from home. Added big square slideshow + "Why useful" section -->
      <div class="card" style="text-align:center">
        <div class="square-slide-wrap">
          <div class="square-slide" id="squareSlide">
            <img id="squareSlideImg" src="https://images.unsplash.com/photo-1505765050359-0101643d6e9d" alt="large-slide" />
            <div class="caption" id="squareCaption">Discover historical places with curated itineraries</div>
          </div>
          <div style="display:flex;gap:10px;justify-content:center;margin-top:6px">
            <button class="btn-ghost" onclick="prevSquare()">?</button>
            <button class="btn-ghost" onclick="toggleSquareSlideshow()" id="squarePlayBtn">Pause</button>
            <button class="btn-ghost" onclick="nextSquare()">?</button>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Why AI Tour Guide is useful for historical travellers</h2>
        <p class="small-muted" style="margin-top:6px">
          Planning trips to historical sites can be confusing - opening times, distances, transport options, and budgeting all matter.
        </p>
        <div style="margin-top:10px;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px">
          <div class="muted-block">
            <strong>Smart Itineraries</strong>
            <div class="small-muted">AI helps build day-by-day plans so you see the best sites without wasting time.</div>
          </div>

          <div class="muted-block">
            <strong>Budget Guidance</strong>
            <div class="small-muted">Enter your budget and bookings; the planner estimates daily spend and gives tips to stretch your money.</div>
          </div>

          <div class="muted-block">
            <strong>Local Travel Advice</strong>
            <div class="small-muted">Quick recommendations for trains, buses and flights based on approximate distance and origin city.</div>
          </div>

          <div class="muted-block">
            <strong>Booking Integration</strong>
            <div class="small-muted">Search hotels, preview room types, and save bookings into your journey for one-click itinerary generation.</div>
          </div>

          <div class="muted-block">
            <strong>Printable Itineraries</strong>
            <div class="small-muted">Generate a clean PDF itinerary for offline use - great for low-connectivity historical sites.</div>
          </div>

          <div class="muted-block">
            <strong>Time Manager</strong>
            <div class="small-muted">Schedule visits and check for overlapping activities so your day stays realistic.</div>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Explore Map</h2>
        <p class="small-muted">Pan / zoom the embedded map to find nearby historical places.</p>
        <iframe style="width:100%;height:280px;border:0;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.06)" loading="lazy"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d241317.1160976656!2d72.74109997809093!3d19.082197839917364!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3be795b5dcf7c41b%3A0x6b6639799af70906!2sMumbai%2C%20Maharashtra!5e0!3m2!1sen!2sin!4v1700000000000"></iframe>
      </div>

      <div class="card">
        <h2>Why choose AI Tour Guide?</h2>
        <p class="small-muted">We combine offline-friendly tools and quick AI guidance to help you plan efficient, memorable historical trips - with budget control, time management and printable itineraries.</p>
        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
          <div style="flex:1;min-width:220px">
            <div class="muted-block"><strong>Smart Itineraries</strong><div class="small-muted">AI-suggested plans tailored to your dates and preferences.</div></div>
          </div>
          <div style="flex:1;min-width:220px">
            <div class="muted-block"><strong>Budget Tracking</strong><div class="small-muted">Set budgets and view remaining balance at a glance.</div></div>
          </div>
          <div style="flex:1;min-width:220px">
            <div class="muted-block"><strong>Printable Tours</strong><div class="small-muted">Generate a clean PDF of your saved journey for offline use.</div></div>
          </div>
        </div>

        <div style="margin-top:12px">
          <div class="gallery">
            <img src="https://images.unsplash.com/photo-1505765050359-0101643d6e9d" alt="place1">
            <img src="https://images.unsplash.com/photo-1526778548025-fa2f459cd5c1" alt="place2">
            <img src="https://images.unsplash.com/photo-1467269204594-9661b134dd2b" alt="place3">
          </div>
        </div>
      </div>
    </div>

    <!-- CHATBOT PAGE (NEW: full page chatbot with close/back) -->
    <div id="chatPage" class="page">
      <div class="card" style="max-width:820px;margin:18px auto;padding:0;overflow:hidden">
        <div id="chatHeaderPage" style="background:var(--accent);color:#fff;padding:12px;display:flex;align-items:center;justify-content:space-between">
          <div>
            <div style="font-weight:700">AI Assistant - Full Chat</div>
            <div style="font-size:12px;opacity:.9">Travel & historical help</div>
          </div>
          <div>
            <button class="btn-ghost" onclick="showPage('homePage')" style="margin-right:8px">Close</button>
          </div>
        </div>

        <div id="chatAreaPage" style="padding:12px;height:520px;overflow:auto;background:#fbfdff"></div>

        <div style="display:flex;gap:8px;padding:10px;border-top:1px solid #eef6ff;background:#fcfeff;align-items:center">
          <input id="chatInputPage" placeholder="Ask about the site, 'Where should I visit today?', or 'Best travel option to Agra'..." style="flex:1;padding:8px;border-radius:10px;border:1px solid #e6eef8" />
          <button class="primary" onclick="sendChat('page')">Send</button>
        </div>
        <div style="padding:8px;font-size:12px;color:var(--muted);text-align:center">Tip: ask about places, travel options, hotels, or budgets.</div>
      </div>
    </div>

    <!-- CREATE JOURNEY PAGE -->
    <div id="journeyPage" class="page">
      <div style="display:flex;gap:16px;flex-wrap:wrap">
        <div style="flex:1;min-width:320px">
          <div class="card">
            <h2 id="journeyTitle">Create Your Journey</h2>
            <label id="labelChoosePlace">Choose place</label>
            <select id="placeSelect">
              <option>Taj Mahal</option>
              <option>Red Fort</option>
              <option>Qutub Minar</option>
              <option>Hampi</option>
            </select>

            <label id="labelArrivalDate" style="margin-top:10px">Arrival date</label>
            <input id="arrive" type="date" />

            <!-- NEW: travel mode -->
            <label id="labelTravelMode" style="margin-top:10px">Travel mode</label>
            <select id="travelMode">
              <option>Train</option>
              <option>Bus</option>
              <option>Flight</option>
              <option>Car</option>
            </select>

            <label id="labelTravelType" style="margin-top:10px">Travel type</label>
            <select id="travelType">
              <option value="Solo">Solo</option>
              <option value="Family">Family</option>
              <option value="Friends">Friends</option>
            </select>

            <label id="labelHotelName">Hotel name</label>
            <input id="hotelName" placeholder="Hotel / Guesthouse" />

            <label id="labelNights">Number of nights</label>
            <input id="nights" type="number" min="1" value="1" />

            <label id="labelPrice">Estimated hotel price (total)</label>
            <input id="hotelPrice" type="number" placeholder="e.g., 4500" />

            <!-- NEW: notes -->
            <label id="labelNotes" style="margin-top:10px">Notes (optional)</label>
            <textarea id="journeyNotes" placeholder="Any notes for this journey item (e.g., room preferences, contact info)"></textarea>

            <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap">
              <button id="addJourneyBtn" class="primary" onclick="addToJourney()">Add to Journey</button>
              <button id="exportJourneyBtn" onclick="exportJourney()">Export JSON</button>
              <!-- NEW: generate PDF for saved journey -->
              <button id="generatePdfBtn" onclick="generatePDF()" class="btn-ghost">Generate PDF</button>
            </div>
          </div>

          
            <!-- New Advice panel -->
            <div id="budgetAdvice" class="small-muted" style="margin-top:8px"></div>
          </div>
        </div>

        <div style="flex:1;min-width:320px">
          <div class="card">
            <h2 id="journeyPlanTitle">Your Journey Plan</h2>
            <div id="journeyList"></div>
            <div style="margin-top:12px;display:flex;gap:10px">
              <button id="loadSampleBtn" onclick="loadSample()">Load sample</button>
              <button id="clearJourneyBtn" onclick="clearJourney()">Clear</button>
            </div>
          </div>

          <div class="card">
            <h2>Time Manager</h2>
            <small class="small-muted">Schedule visits and check overlapping times.</small>
            <label>Visit place</label>
            <input id="visitPlace" placeholder="Place name" />
            <label>Date & time</label>
            <input id="visitDT" type="datetime-local" />
            <label>Duration (minutes)</label>
            <input id="visitDur" type="number" value="60" />
            <button style="margin-top:8px" onclick="addVisit()">Add Visit</button>
            <div id="visitList" class="small-muted" style="margin-top:8px">No visits yet.</div>
          </div>

          <!-- NEW: Daily Itinerary Builder -->
          <div class="card">
            <h3>Daily Itinerary Builder</h3>
            <small class="small-muted">Add activities per day - useful for multi-day trips.</small>
            <div style="display:flex;gap:8px;margin-top:8px">
              <input id="itDay" type="number" min="1" placeholder="Day #" />
              <input id="itActivity" placeholder="Activity (e.g., 'Visit Taj Mahal 8am-10am')" />
              <button class="mini" onclick="addItinerary()">Add</button>
            </div>
            <div id="itineraryContainer" style="margin-top:10px"></div>
            <div style="margin-top:10px;display:flex;gap:8px">
              <button onclick="exportItinerary()" class="btn-ghost">Export Itinerary</button>
              <button onclick="clearItinerary()" class="btn-ghost">Clear Itinerary</button>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- AI PLANNER PAGE -->
<div id="aiPlannerPage" class="page ai-planner-bg">

  <div class="card ai-planner-card">

    <h2 id="aiPlannerTitle">&#x1F9E0; AI Trip Planner</h2>

    <label id="aiMonthLabel">Select Month</label>
    <select id="aiMonth">
      <option value="January">January</option>
      <option value="February">February</option>
      <option value="March">March</option>
      <option value="April">April</option>
      <option value="May">May</option>
      <option value="June">June</option>
      <option value="July">July</option>
      <option value="August">August</option>
      <option value="September">September</option>
      <option value="October">October</option>
      <option value="November">November</option>
      <option value="December">December</option>
    </select>

    <label id="aiBudgetLabel">Budget</label>
    <input type="number" id="aiBudget">

    <label id="aiDaysLabel">Days</label>
    <input type="number" id="aiDays">

    <button id="aiGenerateBtn" class="primary" onclick="generateAIPlan()">
      Generate AI Plan
    </button>
    <button id="aiSurpriseBtn" class="btn-ghost" onclick="surpriseWeekendPlan()" style="margin-top:8px">
      Surprise Me: 3 Days in &#8377;10,000
    </button>

    <div id="aiResult"></div>

  </div>

</div>


<div id="hotelBookingsPage" class="page">
  <div class="card">
    <h2>&#x1F3E8; Hotel Bookings</h2>
    <div id="hotelBookingsList"></div>
  </div>
</div>

<!-- ADMIN PAGE -->
<div id="adminPage" class="page">
  <div class="card">
    <h2>Admin Dashboard</h2>
    <div class="small-muted" id="adminMeta"></div>
    <div style="margin-top:12px">
      <h3>Users</h3>
      <div id="adminUsers"></div>
    </div>
    <div style="margin-top:16px">
      <h3>User Details</h3>
      <div id="adminUserDetails" class="small-muted">Select a user to view full booking and journey history.</div>
    </div>
    <div style="margin-top:16px">
      <h3>Bookings (All Users)</h3>
      <div id="adminBookings"></div>
    </div>
    <div style="margin-top:16px">
      <h3>Journeys (All Users)</h3>
      <div id="adminJourneys"></div>
    </div>
  </div>
</div>










<!-- PROFILE PAGE -->
<div id="profilePage" class="page">

  <div class="card" style="max-width:600px;margin:auto;text-align:center">

    <h2>User Profile</h2>

    <img id="profilePhoto"
      src="https://i.imgur.com/6VBx3io.png"
      style="width:120px;border-radius:50%;margin-bottom:10px">

    <input type="file" id="photoUpload" onchange="uploadPhoto()">

    <p><b>Name:</b> <span id="profileName"></span></p>
    <p><b>Email:</b> <span id="profileEmail"></span></p>
    <p><b>Phone:</b> <span id="profilePhone"></span></p>

    <button class="primary" onclick="editProfile()">Edit Profile</button>

    <h3 style="margin-top:20px">My Trip Photos</h3>
<div id="tripGallery" class="gallery"></div>


  </div>

</div>


<!-- ACHIEVEMENT PAGE -->
<div id="achievementPage" class="page">
  <div class="card" style="max-width:700px;margin:auto">

    <h2>&#x1F3C6; Achievements</h2>

    <div id="achievementList"></div>

  </div>
</div>


  <!-- Chatbot UI (floating kept as fallback) -->
  <div id="chatbotBox">
    <div id="chatHeader">
      <div>AI Assistant</div>
      <div style="font-size:12px;opacity:.9">Travel & historical help</div>
    </div>
    <div id="chatArea"></div>

    <div class="chatInputWrap">
      <input id="chatInput" placeholder="Ask about the site, 'Where should I visit today?', or 'Best travel option to Agra'..." />
      <button onclick="sendChat('float')">Send</button>
    </div>
    <div style="padding:8px;font-size:12px;color:var(--muted);text-align:center">Tip: include your origin city in the message for tailored travel suggestions.</div>
  </div>

<script src="./config.js"></script>
  <script type="module" src="./app.module.js"></script>

<!-- ===== ADD: Script that injects 45 main historical places and populates Create Journey select ===== -->
  <script src="./app.js"></script>




<input 
 type="file"
 id="tripPhotoUpload"
 accept="image/*"
 multiple
 style="display:none"
 onchange="uploadTripPhotos()">


 <div id="fakePaymentBox" style="
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.6);
z-index:9999;
justify-content:center;
align-items:center;
">

<div style="
background:white;
padding:25px;
border-radius:15px;
width:320px;
text-align:center;
">

<h3>&#x1F4B3; Payment Gateway</h3>

<input placeholder="Card Number" style="width:100%;padding:10px;margin-top:10px">
<input placeholder="MM/YY" style="width:100%;padding:10px;margin-top:10px">
<input placeholder="CVV" style="width:100%;padding:10px;margin-top:10px">

<button class="primary"
style="margin-top:15px;width:100%"
onclick="completeFakePayment()">
Pay Now
</button>

<button style="margin-top:10px" onclick="closeFakePayment()">
Cancel
</button>

</div>
</div>



<!-- RECEIPT POPUP -->
<div id="receiptBox" style="
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.6);
z-index:99999;
justify-content:center;
align-items:center;
">

<div style="background:white;padding:25px;border-radius:15px;width:350px">

<h3>&#x1F9FE; Payment Receipt</h3>

<div id="receiptContent"></div>

<button class="primary"
style="margin-top:15px;width:100%"
onclick="closeReceipt()">
Close
</button>

</div>
</div>



</body>
</html>







